(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const Ze=new Map;function ue(e){let t=Ze.get(e);return t===void 0&&(t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Ze.set(e,t)),t}function Fe(e){return`<${String(e.tagName).toLowerCase()}>`}function ke(e,t){e.nodeType===globalThis.Node.ELEMENT_NODE&&(t(e),e.shadowRoot&&ke(e.shadowRoot,t));const n=globalThis.document.createTreeWalker(e,globalThis.NodeFilter.SHOW_ELEMENT,null,!1);for(;n.nextNode();){const r=n.currentNode;t(r),r.shadowRoot&&ke(r.shadowRoot,t)}}const Ee=Promise.resolve(),be=new WeakMap;let q=new Set;function xt(e){q.size===0&&(q=new Set,Ee.then(Kt)),q.add(e)}function Ft(e){q.delete(e)}function Kt(){for(const e of q)try{e()}catch(t){console.error(t)}q.clear()}const se=new WeakMap,te=new Set;function Ke(e){const t=[];let n=0;for(;e;){if(e.resolved=!1,e.contexts)for(const r of e.contexts)!te.has(r)&&!t.includes(r)&&t.push(r);e.observe&&xt(e.observe),e=t[n++]}}function M(e,t){let n=se.get(e);n||(n=new Map,se.set(e,n));let r=n.get(t);return r||(r={key:t,target:e,value:void 0,assertValue:void 0,lastValue:void 0,resolved:!1,contexts:void 0,deps:void 0,observe:void 0},n.set(t,r)),r}function jt(e){const t=se.get(e);return t?[...t.values()]:[]}let j=null;function Pt(){return j?.value}function R(e,t,n){const r=M(e,t);if(j&&(r.contexts||(r.contexts=new Set),j.deps||(j.deps=new Set),r.contexts.add(j),j.deps.add(r)),r.resolved)return r.value;if(r.deps){for(const o of r.deps)o.contexts.delete(r);r.deps.clear()}const s=j;try{if(te.has(r))throw Error(`Circular get invocation is forbidden: '${t}'`);j=r,te.add(r),r.value=n(e,r.assertValue),r.resolved=!0,j=s,te.delete(r)}catch(o){throw j=s,te.delete(r),j&&(j.deps.delete(r),r.contexts.delete(j)),o}return r.value}function Je(e,t,n,r){if(j&&j.target===e&&!r)throw Error(`Try to update the '${t}' property while getting the '${j.key}' property`);const s=M(e,t);s.value=void 0,s.assertValue=n,Ke(s)}function Jt(e,t,n,r){const s=M(e,t),o=n(e,r,s.value);o!==s.value&&(s.value=o,s.assertValue=void 0,Ke(s))}function Ut(e,t,n,r){const s=M(e,t);s.observe=()=>{const o=R(e,t,n);o!==s.lastValue&&(r(e,o,s.lastValue),s.lastValue=o)};try{s.observe()}catch(o){console.error(o)}return()=>{s.observe=void 0,s.lastValue=void 0}}const de=new Set;function Xt(e){de.size||setTimeout(()=>{for(const t of de)(!t.contexts||t.contexts.size===0)&&se.get(t.target).delete(t.key);de.clear()}),de.add(e)}function Ct(e,t){if(Ke(e),t.clearValue&&(e.value=void 0,e.assertValue=void 0,e.lastValue=void 0),t.deleteEntry){if(e.deps){for(const n of e.deps)n.contexts.delete(e);e.deps=void 0}if(e.contexts){for(const n of e.contexts)n.deps.delete(e);e.contexts=void 0}Xt(e)}}function Se(e,t,n={}){const r=M(e,t);Ct(r,n)}function Lt(e,t={}){const n=se.get(e);if(n)for(const r of n.values())Ct(r,t)}function qt(e){if(e.reflect)throw TypeError("'reflect' option is not supported for 'render' property");const{value:t,observe:n}=e;if(typeof t!="function")throw TypeError(`Value for 'render' property must be a function: ${typeof t}`);const r={connect:e.connect,observe:n?(o,i,a)=>{n(o,i(),a)}:(o,i)=>{i()}},s=e.shadow?{mode:e.shadow.mode||"open",delegatesFocus:e.shadow.delegatesFocus||!1}:e.shadow;return s?r.value=o=>{const i=o.shadowRoot||o.attachShadow(s),a=t(o);return()=>(a(o,i),i)}:s===!1?r.value=o=>{const i=t(o);return()=>(i(o,o),o)}:r.value=o=>{const i=t(o);return()=>i(o)},r}function et(e,t,n){!t&&t!==0?e.removeAttribute(n):e.setAttribute(n,t===!0?"":t)}function Ht(e,t){const n=typeof t.value,r=n==="object"?Object.freeze(t.value):t.value;switch(n){case"string":t.value=(o,i)=>i!==void 0?String(i):r;break;case"number":t.value=(o,i)=>i!==void 0?Number(i):r;break;case"boolean":t.value=(o,i)=>i!==void 0?!!i:r;break;case"function":t.value=r;break;default:t.value=(o,i=r)=>i}let s=t.observe;if(t.reflect){const o=ue(e),i=typeof t.reflect=="function"?(a,f,g)=>et(a,t.reflect(f),g):et;s=t.observe?(a,f,g)=>{i(a,f,o),t.observe(a,f,g)}:(a,f)=>i(a,f,o)}return{...t,observe:s,writable:n!=="function"||r.length>1}}const ie=new WeakMap,tt=new WeakMap,nt=new WeakMap;function Yt(e,t){for(const n of this.connects)t.add(n(e));for(const n of this.observers)t.add(n(e))}function Re(e,t){if(t){const o=ie.get(t);if(e===o)return t;for(const i of Object.keys(o))i!=="tag"&&delete t.prototype[i]}else t=class extends globalThis.HTMLElement{constructor(){super();for(const o of t.writable)if(hasOwnProperty.call(this,o)){const i=this[o];delete this[o],this[o]=i}else{const i=this.getAttribute(ue(o));i!==null&&(this[o]=i===""&&typeof this[o]=="boolean"||i)}}connectedCallback(){const o=new Set;nt.set(this,o);const i=Yt.bind(t,this,o);tt.set(this,i),xt(i)}disconnectedCallback(){Ft(tt.get(this));for(const o of nt.get(this))o&&o();Lt(this)}};ie.set(t,Object.freeze(e));const n=new Set,r=new Set,s=new Set;for(const o of Object.keys(e)){if(o==="tag")continue;let i=e[o];if(typeof i!="object"||i===null)i={value:i};else if(!hasOwnProperty.call(i,"value"))throw TypeError(`The 'value' option is required for '${o}' property of the '${e.tag}' element`);i=o==="render"?qt(i):Ht(o,i),i.writable&&s.add(o),Object.defineProperty(t.prototype,o,{get:function(){return R(this,o,i.value)},set:i.writable?function(f){Je(this,o,f)}:void 0,enumerable:!0,configurable:!0}),i.connect&&n.add(a=>i.connect(a,o,()=>{Se(a,o)})),i.observe&&r.add(a=>Ut(a,o,i.value,i.observe))}return t.connects=n,t.observers=r,t.writable=s,t}const Z=new Map;function Qt(e){Z.size||Ee.then(()=>{ke(globalThis.document.body,t=>{if(Z.has(t.constructor)){const n=Z.get(t.constructor),r=ie.get(t.constructor);t.disconnectedCallback();for(const s of Object.keys(r)){const o=typeof r[s],i=o!=="object"&&o!=="function"&&r[s]!==n[s];i&&t.removeAttribute(ue(s)),Se(t,s,{clearValue:i})}t.connectedCallback()}}),Z.clear()}),Z.set(e,ie.get(e))}const pe=new Set;function At(e){if(!e.tag)throw TypeError("Error while defining an element: 'tag' property with dashed tag name is required");if(pe.has(e.tag))throw TypeError(`Error while defining '${e.tag}' element: tag name is already defined`);pe.size||Ee.then(()=>pe.clear()),pe.add(e.tag);const t=globalThis.customElements.get(e.tag);if(t){if(ie.get(t))return Qt(t),Re(e,t),e;throw TypeError(`Custom element with '${e.tag}' tag name already defined outside of the hybrids context`)}return globalThis.customElements.define(e.tag,Re(e)),e}function Zt(e,{root:t="",prefix:n}={}){for(const r of Object.keys(e)){const s=e[r];if(!s.tag){const o=ue([].concat(t).reduce((i,a)=>i.replace(a,""),r).replace(/^[./]+/,"").replace(/\//g,"-").replace(/\.[a-zA-Z]+$/,""));s.tag=n?`${n}-${o}`:o}At(s)}return e}const Mt=Object.freeze(Object.assign(At,{compile:e=>Re(e),from:Zt})),Ue=Symbol("store.connect"),O=new WeakMap,ve=new WeakMap,F=new WeakMap;function Xe(e,t,n){if(n&&(O.set(n,null),ve.set(n,t)),O.set(t,e),F.has(e)){const r=t&&e.isInstance(t)?t:null,s=n&&e.isInstance(n)?n:null;if(r!==s){let o=s?s.id:r.id;F.get(e).forEach(i=>{try{i(o,r,s)}catch(a){console.error(a)}})}}return t}function en(e,t,n){return Xe(e,t,n),e.invalidate&&(e.storage.loose||!n||!e.isInstance(n))&&e.invalidate(),t}function K(e,t,n,r=!0){return Jt(e,t,r?en:Xe,n),n}let he;function P(){return he||(he=Date.now(),Ee.then(()=>{he=void 0})),he}const ye=new WeakMap;function xe(e){let t=ye.get(e);return t||(t=P(),ye.set(e,t)),t}function ge(e){return ye.set(e,P()),e}function rt(e){return ye.set(e,1),e}function _e(e){return globalThis.btoa(Array.from(e).reduce((t,n)=>Math.imul(31,t)+n.charCodeAt(0)|0,0))}const je="hybrids:store:cache",Pe={};let Ce;function tn(e,t){const n=`${je}:${_e(JSON.stringify(e.model))}`;return Pe[n]=P()+t,Ce||(Ce=Promise.resolve().then(()=>{const r=JSON.parse(globalThis.localStorage.getItem(je))||{},s=P();for(const o of Object.keys(r))!Pe[o]&&r[o]<s&&(globalThis.localStorage.removeItem(o),delete r[o]);globalThis.localStorage.setItem(je,JSON.stringify({...r,...Pe})),Ce=null})),n}function nn(e,t){const n=C(e);if(typeof t!="function")throw TypeError(`The second argument must be a function: ${typeof t}`);const r=F.get(n)||new Set;return r.add(t),F.set(n,r),()=>{r.delete(t),r.size===0&&F.delete(n)}}function zt(e,t){typeof t=="function"&&(t={get:t});const n={cache:!0,loose:!1,...t};if(n.observe){const r=n.observe;if(typeof r!="function")throw TypeError(`Storage 'observe' property must be a function: ${typeof r}`);const s=F.get(e)||new Set;s.add(r),F.set(e,s)}if(n.cache===!1||n.cache===0)n.validate=r=>!r||xe(r)===P();else if(typeof n.cache=="number")n.validate=r=>!r||xe(r)+n.cache>P();else{if(n.cache!==!0)throw TypeError(`Storage 'cache' property must be a boolean or number: ${typeof n.cache}`);n.validate=r=>xe(r)!==1}if(n.get||(n.get=r=>{throw le(B(r))}),n.offline)try{const r=n.offline===!0,s=r?1e3*60*60*24*30:n.offline,o=tn(e,s),i=JSON.parse(globalThis.localStorage.getItem(o))||{};let a;n.offline=Object.freeze({key:o,threshold:s,get:r?f=>hasOwnProperty.call(i,f)?JSON.parse(i[f][1]):null:f=>{if(hasOwnProperty.call(i,f)){const g=i[f];return g[0]+s<P()?(delete i[f],null):JSON.parse(g[1])}return null},set(f,g){return g?i[f]=[P(),JSON.stringify(g,function(l,c){if(c===this[""])return c;if(c&&typeof c=="object"){const T=O.get(c);if(T===e&&c.id===f)return String(c);if(T&&T.storage.offline)return T.list?c.map(b=>(we.get(T.model).storage.offline.set(b.id,b),`${b}`)):(T.storage.offline.set(c.id,c),`${c}`)}return c})]:delete i[f],a||(a=Promise.resolve().then(()=>{const u=P();for(const l of Object.keys(i))i[l][0]+s<u&&delete i[l];globalThis.localStorage.setItem(o,JSON.stringify(i)),a=null})),g}})}catch(r){console.error("Error while setup offline cache",r),n.offline=!1}return Object.freeze(n)}function rn(e){return{get:e.enumerable?()=>null:()=>e.create({}),set:e.enumerable?(t,n)=>n:(t,n)=>n===null?{id:t}:n,list:e.enumerable&&function(n){if(n)throw TypeError("Memory-based model definition does not support id");const r=[];for(const{key:s,value:o}of jt(e))s!==e&&o&&!Oe(o)&&r.push(s);return r},loose:!0}}function C(e,t){return Array.isArray(e)?an(e[0],t):Rt(e,t)}function ot(e,t){switch(e){case"string":return n=>n!=null?String(n):"";case"number":return Number;case"boolean":return Boolean;default:throw TypeError(`The value of the '${t}' must be a string, number or boolean: ${e}`)}}function k(e,t,n){const r=M(e,"state").value;return Je(e,"state",{state:t,value:n,error:(t==="error"?n:r?.error)||!1},!0),e}function Y(e){return R(e,"state",(t,n={state:"ready",error:!1})=>n)}function Wt(e){return e?(e^Math.random()*16>>e/4).toString(16):("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,Wt)}const qe=new WeakSet,Ie=new WeakMap;function on(e){if(typeof e!="function")throw TypeError(`The first argument must be a function: ${typeof e}`);return qe.add(e),e}function sn(e){if(e==null)throw TypeError(`The value must be defined: ${e}`);if(!qe.has(e)&&typeof e=="function")throw TypeError("A function is not supported as the value of the record");const t=Object.freeze({});return Ie.set(t,e),t}const kt=new WeakMap;function ln(e,t,n){let r=n.model[t];if(qe.has(r)&&(r=r()),Ie.has(r)){const o=Ie.get(r);if(typeof o=="function")throw TypeError(`A function is not supported as the value of the record for '${t}' property`);return{defaultValue:{id:!0,value:o},type:"record"}}let s=typeof r;if(r instanceof String||r instanceof Number||r instanceof Boolean){const o=kt.get(r);if(!o)throw TypeError(N(e,`You must use primitive ${typeof r.valueOf()} value for '${t}' property of the provided model definition`));r=r.valueOf(),s=typeof r,n.checks.set(t,o)}return{defaultValue:r,type:s}}function N(e,t){return`${t}

Model definition:

${JSON.stringify(e,null,2)}
`}const cn=Promise.resolve(),we=new WeakMap;function Rt(e,t){if(typeof e!="object"||e===null)throw TypeError(`Model definition must be an object: ${typeof e}`);let n=we.get(e);if(n&&!n.enumerable){if(t&&!n.nested)throw TypeError(N(e,"Provided model definition for nested object already used as a root definition"));if(!t&&n.nested)throw TypeError(N(e,"Nested model definition cannot be used outside of the parent definition"))}if(!n){const r=e[Ue];typeof r=="object"&&Object.freeze(r);let s;const o=hasOwnProperty.call(e,"id"),i=!!r,a=new Map,f={};Object.defineProperty(f,"toString",{value:function(){return this.id}});const g=Object.create(f);n={model:e,external:i,enumerable:o,nested:!o&&!i&&t,placeholder:l=>{const c=Object.create(g);return O.set(c,n),be.set(c,Te),o&&(c.id=l),Object.freeze(c)},isInstance:l=>Object.getPrototypeOf(l)!==g,invalidate:()=>{s||(s=cn.then(()=>{Se(n,n,{clearValue:!0}),s=null}))},checks:a},we.set(e,n),n.storage=zt(n,r||rn(n));const u=Object.keys(Object.freeze(e)).map(l=>{if(l!=="id"&&Object.defineProperty(g,l,{get(){throw Error(N(e,`Model instance in ${Y(this).state} state - use store.pending(), store.error(), or store.ready() guards`))},enumerable:!0}),l==="id"){if(e[l]!==!0)throw TypeError(N(e,"The 'id' property in the model definition must be set to 'true' or not be defined"));return($,b,d)=>{let p;hasOwnProperty.call(b,"id")?p=He(b.id):d?p=d.id:p=Wt(),Object.defineProperty($,"id",{value:p,enumerable:!0})}}const{defaultValue:c,type:T}=ln(e,l,n);switch(T){case"function":return $=>{Object.defineProperty($,l,{get(){return R(this,l,()=>c(this))}})};case"object":{if(c===null)throw TypeError(`The value for the '${l}' must be an object instance: ${c}`);if(Array.isArray(c)){const d=typeof c[0];if(d==="undefined")throw TypeError(`The first item of the '${l}' array must be defined`);if(d!=="object"){if(d==="function"&&![String,Number,Boolean].includes(c[0]))throw TypeError(`The array item for the '${l}' must be one of the primitive types constructor: String, Number, or Boolean`);const m=d==="function"?c[0]:ot(d,l),E=d==="function"?[]:Object.freeze(c.map(m));return(h,y,w)=>{if(hasOwnProperty.call(y,l)){if(!Array.isArray(y[l]))throw TypeError(`The value for '${l}' property must be an array: ${typeof y[l]}`);h[l]=Object.freeze(y[l].map(m))}else w&&hasOwnProperty.call(w,l)?h[l]=w[l]:h[l]=E}}const p=C(c,!0);if(p.external&&n.storage.offline&&p.storage.offline&&p.storage.offline.threshold<n.storage.offline.threshold)throw Error(`External nested model for '${l}' property has lower offline threshold (${p.storage.offline.threshold} ms) than the parent definition (${n.storage.offline.threshold} ms)`);if(p.enumerable&&c[1]){const m=c[1];if(typeof m!="object")throw TypeError(`Options for '${l}' array property must be an object instance: ${typeof m}`);m.loose&&(n.contexts=n.contexts||new Set,n.contexts.add(C(c[0])))}return(m,E,h)=>{if(hasOwnProperty.call(E,l)){if(!Array.isArray(E[l]))throw TypeError(`The value for '${l}' property must be an array: ${typeof E[l]}`);m[l]=p.create(E[l],!0)}else m[l]=h&&h[l]||!p.enumerable&&p.create(c)||[]}}if(Object.keys(c).length===0)throw TypeError(`The object for the '${l}' must have at least one property`);const b=C(c,!0);if(b.enumerable||b.external){if(n.storage.offline&&b.storage.offline&&b.storage.offline.threshold<n.storage.offline.threshold)throw Error(`External nested model for '${l}' property has lower offline threshold (${b.storage.offline.threshold} ms) than the parent definition (${n.storage.offline.threshold} ms)`);return(d,p,m)=>{let E;if(hasOwnProperty.call(p,l)){const h=p[l];if(typeof h!="object"||h===null)h!=null&&(E={id:h});else{const y=O.get(h);if(y){if(y.model!==c)throw TypeError("Model instance must match the definition");E=h}else{const w=M(b,p[l].id).value;E=b.create(h,w&&b.isInstance(w)?w:void 0),K(b,E.id,E)}}}else E=m&&m[l];if(E){const h=E.id;Object.defineProperty(d,l,{get(){return R(this,l,()=>L(c,h))},enumerable:!0})}else d[l]=void 0}}return(d,p,m)=>{hasOwnProperty.call(p,l)?d[l]=p[l]===null?b.create({}):b.create(p[l],m&&m[l]):d[l]=m?m[l]:b.create({})}}case"record":{const $=C(c,!0);return(b,d,p)=>{if(d[l]===null){b[l]={};return}if(d[l]===void 0){b[l]=p?.[l]??{};return}if(typeof d[l]!="object")throw TypeError(`The value for the '${l}' must be an object instance: ${typeof d[l]}`);const m=d[l];let E={};if(p)for(const h of Object.keys(p[l]))hasOwnProperty.call(m,h)||Object.defineProperty(E,h,{get(){return p[l][h]},enumerable:!0,configurable:!0});for(const h of Object.keys(m)){if(m[h]===null)continue;const y=$.create({id:h,value:m[h]},{id:h,value:p&&p[l][h]});Object.defineProperty(E,h,{get(){return R(this,h,()=>y.value)},enumerable:!0})}b[l]=E}}default:{const $=ot(T,l);return(b,d,p)=>{hasOwnProperty.call(d,l)?b[l]=$(d[l]):p&&hasOwnProperty.call(p,l)?b[l]=p[l]:b[l]=c}}}});n.create=function(c,T){if(c===null)return null;if(typeof c!="object")throw TypeError(`Model values must be an object instance: ${c}`);const $=Object.create(f);for(const b of u)b($,c,T);return O.set($,n),be.set($,Te),Object.freeze($)},Object.freeze(g),Object.freeze(n)}return n}const st=Object.getOwnPropertyNames(Array.prototype).reduce((e,t)=>(t==="length"||t==="constructor"||Object.defineProperty(e,t,{get(){throw Error(N(L(O.get(this).model),`Model list instance in ${Y(this).state} state - use store.pending(), store.error(), or store.ready() guards`))}}),e),[]),De=new WeakMap;function an(e,t){let n=De.get(e);if(n&&!n.enumerable&&!t&&n.nested)throw TypeError(N(e,"Nested model definition cannot be used outside of the parent definition"));if(!n){const r=Rt(e),s=new Set;if(r.storage.loose&&s.add(r),!t){if(!r.enumerable)throw TypeError(N(e,"Provided model definition does not support listing (it must be enumerable - set `id` property to `true`)"));if(!r.storage.list)throw TypeError(N(e,"Provided model definition storage does not support `list` action"))}t=!r.enumerable&&!r.external&&t,n={list:!0,nested:t,model:e,contexts:s,enumerable:r.enumerable,external:r.external,placeholder:o=>{const i=Object.create(st);return O.set(i,n),Object.defineProperties(i,{id:{value:o},toString:{value:function(){return this.id}}}),Object.freeze(i)},isInstance:o=>Object.getPrototypeOf(o)!==st,create(o,i=!1){if(o===null)return null;const a=[];for(const f of o){let g;if(typeof f=="object"&&f!==null){g=B(f.id);const u=O.get(f);let l=f;if(u){if(u.model!==e)throw TypeError("Model instance must match the definition")}else{const c=r.enumerable&&M(r,g).value;l=r.create(f,c&&r.isInstance(c)?c:void 0),r.enumerable&&(g=B(l.id),K(r,g,l,i))}r.enumerable||a.push(l)}else{if(!r.enumerable)throw TypeError(`Model instance must be an object: ${typeof f}`);g=B(f)}if(r.enumerable){const u=a.length;Object.defineProperty(a,u,{get(){return R(this,u,()=>L(e,g))},enumerable:!0})}}return Object.defineProperties(a,{id:{value:o.id},toString:{value:function(){return this.id}}}),O.set(a,n),be.set(a,Te),Object.freeze(a)}},n.storage=Object.freeze({...zt(n,{cache:r.storage.cache,get:!t&&(o=>r.storage.list(o))}),offline:r.storage.offline&&{threshold:r.storage.offline.threshold,get:o=>{const i=B(o);let a=r.storage.offline.get(_e(String(i)));return a?(a=a.map(f=>r.storage.offline.get(f)),a.id=i,a):null},set:(o,i)=>{r.storage.offline.set(_e(String(B(o))),i.map(a=>(r.storage.offline.set(a.id,a),a.id)))}}}),De.set(e,Object.freeze(n))}return n}function He(e){if(typeof e!="object")return e!==void 0?String(e):e;const t={};for(const n of Object.keys(e).sort()){if(typeof e[n]=="object"&&e[n]!==null)throw TypeError(`You must use primitive value for '${n}' key: ${typeof e[n]}`);t[n]=e[n]}return t}function B(e){return e=He(e),typeof e=="object"?JSON.stringify(e):e}const fn=new WeakSet;function le(e,t){const n=Error(N(e,`Model instance ${t!==void 0?`with '${t}' id `:""}does not exist`));return fn.add(n),n}function ne(e,t){return k(e,"error",t)}function L(e,t){const n=C(e);let r;if(n.enumerable){if(r=B(t),!r&&!n.list&&!ce.get(n))throw TypeError(N(e,`Provided model definition requires non-empty id: "${r}"`))}else if(t!==void 0)throw TypeError(N(e,`Provided model definition does not support id: ${JSON.stringify(t)}`));const{offline:s,validate:o}=n.storage,i=M(n,r),a=i.value;return a&&Y(a).state!=="pending"&&!o(a)&&(i.resolved=!1),R(n,r,()=>{t=He(t);let f=!0;if(n.contexts)for(const c of n.contexts)R(c,c,()=>P())===P()&&(f=!1);if(f&&a&&o(a))return a;const g=()=>a||s&&n.create(s.get(r))||n.placeholder(t);let u;try{u=n.storage.get(t)}catch(c){return ge(ne(g(),c))}if(!(u instanceof Promise)&&u!==void 0&&typeof u!="object")throw TypeError(N(e,`Storage 'get' method must return a Promise, an instance, or null: ${u}`));try{if(typeof u!="object"||u===null)throw s&&s.set(r,null),le(e,r)}catch(c){return ge(ne(g(),c))}if(u instanceof Promise)return u=u.then(c=>{if(c!==void 0&&typeof c!="object")throw TypeError(N(e,`Storage 'get' method must resolve to an instance, or null: ${c}`));if(typeof c!="object"||c===null)throw s&&s.set(r,null),le(e,r);c.id!==t&&(c.id=t);const T=n.create(c);return s&&s.set(r,T),K(n,r,ge(T))}).catch(c=>K(n,r,ne(g(),c))),k(g(),"pending",u);u.id!==t&&(u.id=t);const l=n.create(u);return s&&Promise.resolve().then(()=>{s.set(r,l)}),Xe(n,ge(l),a)})}const ce=new WeakMap;function it(e){const t=Object.keys(e),n=Error(`Model validation failed (${t.join(", ")}) - read the details from 'errors' property`);return n.errors=e,n}function re(e,t={}){let n=O.get(e);if(n===null&&(e=ve.get(e),n=O.get(e)),n===null)throw Error("Provided model instance has expired. Haven't you used stale value?");let r=!!n;if(n||(n=C(e)),n.nested)throw N(n.model,TypeError("Setting provided nested model instance is not supported, use the root model instance"));if(n.list)throw TypeError("Listing model definition does not support 'set' method");if(!n.storage.set)throw N(n.model,TypeError("Provided model definition storage does not support 'set' method"));if(!r&&!n.enumerable&&(r=!0,e=L(e)),r){const c=H(e);if(c)return c.then(T=>re(T,t))}const s=ce.get(n);let o;if(n.enumerable&&!r&&(!t||typeof t!="object"))throw TypeError(`Values must be an object instance: ${t}`);if(!s&&t&&hasOwnProperty.call(t,"id"))throw TypeError(`Values must not contain 'id' property: ${t.id}`);const i=n.create(t,r?e:void 0),a=t?Object.keys(t):[],f={},g=r&&s&&Oe(e);let u=!1;if(i&&n.checks.size)for(const[c,T]of n.checks.entries()){if(a.indexOf(c)===-1&&(g&&g.errors&&g.errors[c]&&(u=!0,f[c]=g.errors[c]),s&&i[c]==n.model[c]))continue;let $;try{$=T(i[c],c,i)}catch(b){$=b}$!==!0&&$!==void 0&&(u=!0,f[c]=$||!0)}let l;try{if(u&&!s)throw it(f);o=i?i.id:e.id,l=n.storage.set(r?o:void 0,i,a)}catch(c){return r&&k(e,"error",c),Promise.reject(c)}if(!(l instanceof Promise)&&l!==void 0&&typeof l!="object")throw TypeError(N(n.model,`Storage 'set' method must return a Promise, an instance, or null: ${l}`));return l=Promise.resolve(l).then(c=>{if(c!==void 0&&typeof c!="object")throw TypeError(N(n.model,`Storage 'set' method must resolve to an instance or null: ${c}`));const T=c===i?i:n.create(c);if(r&&T&&o!==T.id)throw TypeError(N(n.model,`Local and storage data must have the same id: '${o}', '${T.id}'`));let $=T?T.id:o;return u&&s&&k(T,"error",it(f)),s&&r&&hasOwnProperty.call(c,"id")&&(!i||i.id!==e.id)?$=e.id:n.storage.offline&&n.storage.offline.set($,T),K(n,$,T||ne(n.placeholder($),le(n.model,o)),!0)}).catch(c=>{throw c=c!==void 0?c:Error("Undefined error"),r&&k(e,"error",c),c}),r&&k(e,"pending",l),l}function un(e,t){if(typeof t!="object")throw TypeError(`Values must be an object instance: ${t}`);let n=O.get(e);if(n===null&&(e=ve.get(e),n=O.get(e)),n===null)throw Error("Provided model instance has expired. Haven't you used stale value?");if(n===void 0){if(!t)throw TypeError("Values must be defined for usage with model definition");n=C(e),e=void 0}else if(t&&hasOwnProperty.call(t,"id"))throw TypeError(`Values must not contain 'id' property: ${t.id}`);if(n.list)throw TypeError("Listing model definition is not supported in sync method");const r=n.create(t,e),s=t?r.id:e.id;return K(n,s,r||ne(n.placeholder(s),le(n.model,s)))}function Ye(e,t=!0){if(typeof e!="object"||e===null)throw TypeError(`The first argument must be a model instance or a model definition: ${e}`);let n=O.get(e);if(n===null)throw Error("Provided model instance has expired. Haven't you used stale value from the outer scope?");if(n){const r=t&&n.storage.offline;r&&r.set(e.id,null),rt(e),Se(n,e.id,{clearValue:t,deleteEntry:t})}else{if(!we.get(e)&&!De.get(e[0]))return;n=C(e);const r=t&&n.storage.offline;for(const s of jt(n))s.key!==n&&(r&&r.set(s.key,null),rt(s.value));Lt(n,{clearValue:t,deleteEntry:t})}}function H(...e){let t=!1;const n=e.map(r=>{try{const{state:s,value:o}=Y(r);if(s==="pending")return t=!0,o}catch{}return Promise.resolve(r)});return t&&(e.length>1?Promise.all(n):n[0])}function _t(e,t){e=ve.get(e)||e,O.get(e)||(e=L(e,t));const n=H(e);if(!n){const r=Oe(e);return r?Promise.reject(r):Promise.resolve(e)}return n.then(r=>_t(r))}function Oe(e,t){if(e===null||typeof e!="object")return!1;const n=Y(e);if(t!==void 0){const r=typeof n.error=="object"&&n.error&&n.error.errors;return t===null?!r&&n.error:r[t]}return n.error}function Ve(...e){return e.length>0&&e.every(t=>{const n=O.get(t);return!!(n&&n.isInstance(t))})}function lt(e,t){return e={...e,...t},delete e.id,e}function dn(e,t={}){const n=O.get(e);if(!n||!ce.has(n))throw TypeError(`Provided model instance is not a draft: ${e}`);if(H(e))throw Error("Model draft in pending state");const r=ce.get(n);let s;if(M(r,e.id).value){const o=L(r.model,e.id);s=Promise.resolve(H(o)||o).then(i=>re(i,lt(e,t)))}else s=re(r.model,lt(e,t));return s=s.then(o=>(k(e,"ready"),re(e,o).then(()=>o))).catch(o=>(k(e,"error",o),Promise.reject(o))),k(e,"pending",s),s}function pn(e,t){return!!e||`${t} is required`}function hn(e,t=pn,n=""){switch(typeof e){case"string":e=new String(e);break;case"number":e=new Number(e);break;case"boolean":e=new Boolean(e);break;default:throw TypeError(`Default value must be a string, number or boolean: ${typeof e}`)}let r;if(t instanceof RegExp)r=s=>t.test(s)||n;else if(typeof t=="function")r=(...s)=>{const o=t(...s);return o!==!0&&o!==void 0&&n||o};else throw TypeError(`The second argument must be a RegExp instance or a function: ${typeof t}`);return kt.set(e,r),e}function It(e){return e&&O.has(e)?e.id:e??void 0}function ct(e,t,n){if(n=It(n),!t.enumerable&&!t.list)return L(e,n);const r=Pt(),s=n!==void 0||t.list?L(e,n):void 0;if(r&&s&&s.id!==r.id&&Ve(r)&&!Ve(s)){const o=O.get(r),i=Object.freeze(Object.create(r));return O.set(i,o),Je(i,"state",Y(s),!0),i}return s}function at(e,t,n,r){const s=Pt();if(n=It(n??s?.id),n===void 0&&!s&&r==null)if(t.enumerable){const o=t.create({});n=o.id,K(t,o.id,o,!1)}else Ye(t.model);return L(e,n)}function Te(e,t={}){const n=C(e);if(t.id!==void 0&&typeof t.id!="function"){const s=t.id;t.id=o=>o[s]}if(t.id&&!n.enumerable)throw TypeError("Store factory for singleton model definition does not support 'id' option");let r;if(t.draft){if(n.list)throw TypeError("Draft mode is not supported for listing model definition");return r=C({...e,[Ue]:{get(s){const o=L(n.model,s);return H(o)||o},set(s,o){return o===null?{id:s}:o}}}),ce.set(r,n),e=r.model,{value:t.id?(s,o)=>at(e,r,t.id(s),o):(s,o)=>at(e,r,o,o),connect:n.enumerable?(s,o)=>()=>{Ye(s[o],!0)}:void 0}}return{value:t.id?s=>ct(e,n,t.id(s)):(s,o)=>ct(e,n,o)}}const W=Object.freeze(Object.assign(Te,{connect:Ue,get:L,set:re,sync:un,clear:Ye,pending:H,error:Oe,ready:Ve,submit:dn,value:hn,resolve:_t,ref:on,record:sn,observe:nn})),gn=globalThis.document&&globalThis.document.startViewTransition!==void 0&&function e(t){return async function n(r,s){if(t.useLayout=n.useLayout,e.instance){console.warn(`${Fe(r)}: view transition already in progress`),e.instance.finished.finally(()=>{t(r,s)});return}e.instance=globalThis.document.startViewTransition(()=>{t(r,s)}),e.instance.finished.finally(()=>{e.instance=void 0})}}||(e=>e),oe=new WeakMap;function V(e){let t=oe.get(e);return t||(oe.set(e,t={}),t)}function Ne(e){let t;for(;e&&(t=V(e))&&t.endNode;)e=t.endNode;return e}function ae(e){if(e.nodeType===globalThis.Node.TEXT_NODE){const t=oe.get(e);if(t&&t.startNode){const n=Ne(t.endNode);let r=t.startNode;const s=n.nextSibling;for(;r;){const o=r.nextSibling;r.parentNode.removeChild(r),r=o!==s&&o}oe.set(e,{})}}else{let t=e.childNodes[0];for(;t;)e.removeChild(t),t=e.childNodes[0];oe.set(e,{})}}const mn=Date.now(),J=(e=0)=>`H-${mn}-${e}`,Le=/^\d+$/,bn={block:(e,t)=>({display:"block","text-align":t}),inline:({display:e})=>({display:`inline${e?`-${e}`:""}`}),contents:{display:"contents"},hidden:{display:"none"},...["row","row-reverse","column","column-reverse"].reduce((e,t)=>(e[t]=(n,r="nowrap")=>({display:"flex","flex-flow":`${t} ${r}`}),e),{}),grow:(e,t=1)=>({"flex-grow":t}),shrink:(e,t=1)=>({"flex-shrink":t}),basis:(e,t)=>({"flex-basis":S(t)}),order:(e,t=0)=>({order:t}),grid:(e,t="1",n="",r="",s="")=>({display:"grid",...["columns","rows"].reduce((o,i)=>{const a=i==="columns"?t:n;return o[`grid-template-${i}`]=a&&a.split("|").map(f=>f.match(Le)?`repeat(${f}, minmax(0, 1fr))`:S(f)).join(" "),o},{}),"grid-auto-flow":`${r} ${s&&"dense"}`}),area:(e,t="",n="")=>({"grid-column":t.match(Le)?`span ${t}`:t,"grid-row":n.match(Le)?`span ${n}`:n}),gap:(e,t=1,n="")=>({"column-gap":S(t),"row-gap":S(n||t)}),items:(e,t="start",n="")=>({"place-items":`${t} ${n}`}),content:(e,t="start",n="")=>({"place-content":`${t} ${n}`}),self:(e,t="start",n="")=>({"place-self":`${t} ${n}`}),center:{"place-items":"center","place-content":"center"},size:(e,t,n=t)=>({width:S(t),height:S(n),"box-sizing":"border-box"}),width:(e,t,n,r)=>({width:S(t),"min-width":S(n),"max-width":S(r),"box-sizing":"border-box"}),height:(e,t,n,r)=>({height:S(t),"min-height":S(n),"max-height":S(r),"box-sizing":"border-box"}),ratio:(e,t)=>({"aspect-ratio":t}),overflow:(e,t="hidden",n="")=>{const r=n?`-${t}`:"",s=n||t;return{[`overflow${r}`]:s,...s==="scroll"?{"flex-grow":e["flex-grow"]||1,"flex-basis":0,"overscroll-behavior":"contain","--webkit-overflow-scrolling":"touch"}:{}}},margin:(e,t="1",n,r,s)=>t.match(/top|bottom|left|right/)?{[`margin-${t}`]:S(n||"1")}:{margin:`${S(t)} ${S(n)} ${S(r)} ${S(s)}`},padding:(e,t="1",n,r,s)=>t.match(/top|bottom|left|right/)?{[`padding-${t}`]:S(n||"1")}:{padding:`${S(t)} ${S(n)} ${S(r)} ${S(s)}`},absolute:{position:"absolute"},relative:{position:"relative"},fixed:{position:"fixed"},sticky:{position:"sticky"},static:{position:"static"},inset:(e,t=0)=>{const n=S(t);return{top:n,right:n,bottom:n,left:n}},top:(e,t=0)=>({top:S(t)}),bottom:(e,t=0)=>({bottom:S(t)}),left:(e,t=0)=>({left:S(t)}),right:(e,t=0)=>({right:S(t)}),layer:(e,t=1)=>({"z-index":t}),"":(e,t,...n)=>{if(n.length<2)throw new Error("Generic rule '::' requires at least two arguments, eg.: ::[property]:[name]");return{[n[n.length-2]]:`var(--${n.join("-")})`}},view:(e,t)=>({"view-transition-name":t})},yn={min:"min-content",max:"max-content",fit:"fit-content",full:"100%"},wn={print:"print",portrait:"(orientation: portrait)",landscape:"(orientation: landscape)",hover:"(hover: hover)","any-hover":"(any-hover: hover)"};function S(e){return e=yn[e]||e,/^-?\d+(\.\d+)*$/.test(String(e))?`${e*8}px`:e||""}const Qe=!!(globalThis.document&&globalThis.document.adoptedStyleSheets);let U;function Dt(){if(U)return U;if(Qe)U=new globalThis.CSSStyleSheet;else{const e=globalThis.document.createElement("style");e.appendChild(globalThis.document.createTextNode("")),globalThis.document.head.appendChild(e),U=e.sheet}return U.insertRule(":host([hidden]) { display: none; }"),U}const ft=new WeakMap;let Be=new WeakSet;function Tn(e){const t=e.getRootNode();if(Be.has(t))return;const n=Dt();if(Qe&&t.adoptedStyleSheets)t.adoptedStyleSheets=[...t.adoptedStyleSheets,n];else{if(t===globalThis.document)return;let r=ft.get(t);r||(r=globalThis.document.createElement("style"),t.appendChild(r),ft.set(t,r));let s="";for(let o=0;o<n.cssRules.length;o++)s+=n.cssRules[o].cssText;r.textContent=s}Be.add(t)}const ut=new Map;function dt(e,t,n,r){let s=ut.get(e);s||(s=`l-${Math.random().toString(36).substr(2,5)}`,ut.set(e,s)),Qe||(Be=new WeakSet);const o=Dt(),[i,a=""]=t.split("@"),f=Object.entries(n.replace(/\s+/g," ").trim().split(" ").reduce((u,l)=>{const[c,...T]=l.split(":"),$=bn[c];if(!$)throw TypeError(`Unsupported layout rule: '${c}'`);return Object.assign(u,typeof $=="function"?$(u,...T.map(b=>b.match(/--.*/)?`var(${b})`:b)):$)},{})).reduce((u,[l,c])=>c!==void 0&&c!==""?u+`${l}: ${c};`:u,""),g=a.split(":").map(u=>u.split("|").map(l=>l&&(wn[l]||`(min-width: ${l})`)).join(" and ")).join(", ");if(r){const u=`:host(:where(.${s}-s${i}))`,l=`:where(.${s}-c${i})`;[u,l].forEach(c=>{o.insertRule(g?`@media ${g} { ${c} { ${f} } }`:`${c} { ${f} }`,o.cssRules.length-1)})}else{const u=`.${s}${i}`;o.insertRule(g?`@media ${g} { ${u} { ${f} } }`:`${u} { ${f} }`,o.cssRules.length-1)}return s}const Ge=new WeakMap;function $n(e,t){const n=V(e),r=n.startNode,s=Ne(n.endNode);t.parentNode.insertBefore(e,t.nextSibling);let o=e,i=r;for(;i;){const a=i.nextSibling;o.parentNode.insertBefore(i,o.nextSibling),o=i,i=a!==s.nextSibling&&a}}function En(e,t,n,r,s){let o=Ge.get(t);const i=n.map((u,l)=>({id:hasOwnProperty.call(u,"id")?u.id:l,value:u,placeholder:null,available:!0}));if(Ge.set(t,i),o){const u=new Set;for(const l of i)u.add(l.id);o=o.filter(l=>u.has(l.id)?!0:(ae(l.placeholder),l.placeholder.parentNode.removeChild(l.placeholder),!1))}let a=t;const f=n.length-1,g=V(t);for(let u=0;u<i.length;u+=1){const l=i[u];let c;if(o){for(let T=0;T<o.length;T+=1)if(o[T].available&&o[T].id===l.id){c=o[T];break}}c?(c.available=!1,l.placeholder=c.placeholder,l.placeholder.previousSibling!==a&&$n(l.placeholder,a),c.value!==l.value&&r(e,l.placeholder,l.value,c.value,s)):(l.placeholder=globalThis.document.createTextNode(""),a.parentNode.insertBefore(l.placeholder,a.nextSibling),r(e,l.placeholder,l.value,void 0,s)),a=Ne(V(l.placeholder).endNode||l.placeholder),u===0&&(g.startNode=l.placeholder),u===f&&(g.endNode=a)}if(o)for(const u of o)u.available&&(ae(u.placeholder),u.placeholder.parentNode.removeChild(u.placeholder))}function Sn(e,t,n){ae(t);const r=V(t);r.startNode=r.endNode=n,t.parentNode.insertBefore(n,t.nextSibling)}function pt(e){const t=typeof e;if(t==="object"){if(Array.isArray(e))return"array";if(e instanceof globalThis.Node)return"node"}return t}function fe(e,t,n,r,s){const o=pt(n),i=pt(r);switch(i!=="undefined"&&o!==i&&(o!=="function"&&ae(t),i==="array"?Ge.delete(t):i!=="node"&&i!=="function"&&(t.textContent="")),o){case"array":En(e,t,n,fe,s);break;case"node":Sn(e,t,n);break;case"function":s&&(n.useLayout=!0),n(e,t);break;default:t.textContent=o==="number"||n?n:""}}const Ae=new WeakMap;function vn(e){return(t,n,r,s)=>{if(s){const o=Ae.get(n);n.removeEventListener(e,o.get(s),s.options!==void 0?s.options:!1)}if(r){if(typeof r!="function")throw Error(`Event listener must be a function: ${typeof r}`);let o=Ae.get(n);o||(o=new WeakMap,Ae.set(n,o));const i=r.bind(null,t);o.set(r,i),n.addEventListener(e,i,r.options!==void 0?r.options:!1)}}}function Me(e,t){if(t)for(const n of String(t).split(/\s+/))n&&e.add(n)}function On(e){const t=new Set;if(Array.isArray(e))for(const n of e)Me(t,n);else if(e!==null&&typeof e=="object")for(const[n,r]of Object.entries(e))n&&r&&Me(t,n);else Me(t,e);return t}const ht=new WeakMap;function Nn(e,t,n){const r=ht.get(t)||new Set,s=On(n);ht.set(t,s);for(const o of s)t.classList.add(o),r.delete(o);for(const o of r)t.classList.remove(o)}const gt=new WeakMap;function xn(e,t,n){if(n===null||typeof n!="object")throw TypeError(`Style value must be an object in ${Fe(t)}:`,n);const r=gt.get(t)||new Map,s=new Map;for(const o of Object.keys(n)){const i=ue(o),a=n[o];!a&&a!==0?t.style.removeProperty(i):t.style.setProperty(i,a),s.set(i,a),r.delete(i)}for(const o of r.keys())t.style[o]="";gt.set(t,s)}function jn(e,t,n){if(n===!1||n===void 0||n===null)e.removeAttribute(t);else{const r=n===!0?"":String(n);e.setAttribute(t,r)}}function Pn(e,t,n){if(t.substr(0,2)==="on"){const r=t.substr(2);return vn(r)}switch(e){case"class":return Nn;case"style":return xn;default:{let r;return(s,o,i)=>{r===void 0&&(r=o.tagName!=="svg",r&&(r=t in o,r||(t=e.replace(/-./g,a=>a[1].toUpperCase()),r=t in o))),r?o[t]=i:jn(o,e,i)}}}}const Vt=J("(\\d+)"),ee=new RegExp(`^${Vt}$`),X=new RegExp(Vt,"g"),Cn=/^[^A-Za-z]+$/;function Ln(e){let t=e[0],n=!1;for(let r=1;r<e.length;r+=1)n=n||t.match(/<\s*(table|th|tr|td|thead|tbody|tfoot|caption|colgroup)([^<>]|"[^"]*"|'[^']*')*>\s*$/),t+=(n?`<!--${J(r-1)}-->`:J(r-1))+e[r],n=n&&!t.match(/<\/\s*(table|th|tr|td|thead|tbody|tfoot|caption|colgroup)\s*>/);return t}function An(e){return e.replace(/\s*=\s*['"]*$/g,"").split(/\s+/).pop()}function mt(e){return globalThis.document.createTreeWalker(e,globalThis.NodeFilter.SHOW_ELEMENT|globalThis.NodeFilter.SHOW_TEXT|globalThis.NodeFilter.SHOW_COMMENT,null,!1)}function Mn(e,t=0){e=e.replace(/(^[\n\s\t ]+)|([\n\s\t ]+$)+/g,"");let n=e.indexOf(`
`);if(n>-1){let r=0-t-2;for(n+=1;e[n]===" "&&n<e.length;n+=1)r+=1;return e.replace(/\n +/g,s=>s.substr(0,Math.max(s.length-r,1)))}return e}function bt(e,t){const n=J(t);return`${Mn(e).split(`
`).filter(s=>s).map(s=>{const o=s.indexOf(n);return o>-1?`| ${s}
--${"-".repeat(o)}${"^".repeat(6)}`:`| ${s}`}).join(`
`).replace(X,"${...}")}`}const yt=new Map,$e=new WeakMap,wt=new WeakMap;function zn(e,t){const n=$e.get(e);if(!n&&!t||t?.length&&n?.length&&t?.every((i,a)=>n[a]===i))return;let r=null;if(t){r=[];for(const i of t){let a=i;a instanceof globalThis.CSSStyleSheet||(a=yt.get(i),a||(a=new globalThis.CSSStyleSheet,a.replaceSync(i),yt.set(i,a))),r.push(a)}}let s;const o=wt.get(e);if(o){s=[];for(const i of e.adoptedStyleSheets)o.includes(i)||s.push(i)}if(r){s=s||e.adoptedStyleSheets.length?[...e.adoptedStyleSheets]:[];for(const i of r)s.push(i)}e.adoptedStyleSheets=s,$e.set(e,t),wt.set(e,r)}const ze=new WeakMap;function Tt(e,t){let n=ze.get(e);if(t){const r=$e.get(e);if(r&&t.every((s,o)=>r[o]===s))return;(!n||n.parentNode!==e)&&(n=globalThis.document.createElement("style"),ze.set(e,n),e=Ne(e),e.nodeType===globalThis.Node.TEXT_NODE?e.parentNode.insertBefore(n,e.nextSibling):e.appendChild(n)),n.textContent=t.join(`
/*------*/
`),$e.set(e,t)}else n&&(n.parentNode.removeChild(n),ze.set(e,null))}function Wn(e,t,n,r){let s="";s=Ln(e);let o=globalThis.document.createElement("template");o.innerHTML=s;let i;const a=o.content.children[0];if(a instanceof globalThis.HTMLTemplateElement){for(const d of Array.from(a.attributes)){const p=d.value.trim();if(p&&d.name.startsWith("layout")){if(p.match(X))throw Error("Layout attribute cannot contain expressions");i=dt(a,d.name.substr(6),p,!0)}}if(i!==void 0&&o.content.children.length>1)throw Error("Template, which uses layout system must have only the '<template>' root element");r=i||a.hasAttribute("layout"),o=a}const f=mt(o.content),g={},u=[];let l=0,c=null,T=!1,$=!1;for(;f.nextNode();){let d=f.currentNode;if(c&&!c.contains(d)&&(c=null),d.nodeType===globalThis.Node.COMMENT_NODE&&ee.test(d.textContent)&&(d.parentNode.insertBefore(globalThis.document.createTextNode(d.textContent),d.nextSibling),f.nextNode(),d.parentNode.removeChild(d),d=f.currentNode),d.nodeType===globalThis.Node.TEXT_NODE){let p=d.textContent;const m=p.match(ee);if(m)d.textContent="",g[m[1]]=[l,fe];else{if(Hn()&&!c&&!p.match(/^\s*$/)){let h;const y=p.trim(),w=y.replace(/\s+/g," ").replace(X,(v,x)=>(x=Number(x),h===void 0&&(h=x),`\${${x-h}}`));if(!w.match(Cn)){let v=d.previousSibling&&d.previousSibling.nodeType===globalThis.Node.COMMENT_NODE?d.previousSibling:"";v&&(v.parentNode.removeChild(v),l-=1,v=(v.textContent.split("|")[1]||"").trim().replace(/\s+/g," "));const x=Yn(w,v).replace(/\${(\d+)}/g,(_,I)=>J(Number(I)+h));p=p.replace(y,x),d.textContent=p}}const E=p.match(X);if(E){let h=d;E.reduce((y,w)=>{const[v,x]=y.pop().split(w);return v&&y.push(v),y.push(w),x&&y.push(x),y},[p]).forEach((y,w)=>{w===0?h.textContent=y:(h=h.parentNode.insertBefore(globalThis.document.createTextNode(y),h.nextSibling),f.currentNode=h,l+=1);const v=h.textContent.match(ee);v&&(h.textContent="",g[v[1]]=[l,fe])})}}}else if(d.nodeType===globalThis.Node.ELEMENT_NODE){(d.tagName==="STYLE"||d.tagName==="SLOT"||d.tagName==="LINK"&&d.rel==="stylesheet")&&(T=!0,$=$||d.tagName==="SLOT"),!c&&(d.getAttribute("translate")==="no"||d.tagName.toLowerCase()==="script"||d.tagName.toLowerCase()==="style")&&(c=d);const p=d.tagName.toLowerCase();p.match(/.+-.+/)&&!globalThis.customElements.get(p)&&!u.includes(p)&&u.push(p);for(const m of Array.from(d.attributes)){const E=m.value.trim(),h=m.name;if(r&&h.startsWith("layout")&&E){if(E.match(X))throw Error("Layout attribute cannot contain expressions");const w=dt(d,h.substr(6),E);d.removeAttribute(h),d.classList.add(w);continue}const y=E.match(ee);if(y){const w=An(e[y[1]]);g[y[1]]=[l,Pn(h,w)],d.removeAttribute(m.name)}else{const w=E.match(X);if(w){const v=`attr__${h}`;for(const[x,_]of w.entries()){const[,I]=_.match(ee);let z=!1;g[I]=[l,(D,A,Gt)=>{const Q=V(A);Q[v]=(Q[v]||E).replace(_,Gt??""),(w.length===1||x+1===w.length)&&(z=z||!(A instanceof globalThis.SVGElement)&&h in A,z?A[h]=Q[v]:A.setAttribute(h,Q[v]),Q[v]=void 0)},!0]}m.value=""}}}}l+=1}u.length&&console.warn(`Not defined ${u.map(d=>`<${d}>`).join(", ")} element${u.length>1?"s":""} found in the template:
${bt(s,-1)}`);const b=Object.keys(g);return function(p,m,E,h){if(m){if($&&!p.shadowRoot)throw TypeError("The <slot> element found - use 'shadow' options to explicitly define Shadow DOM mode")}else m=p.shadowRoot||(T||h)&&p.attachShadow({mode:"open"})||p;let y=V(m);if(o!==y.template){const w=globalThis.document.importNode(o.content,!0),v=mt(w),x=[];let _=0,I=0,z=g[b[I]];for(;v.nextNode();){const D=v.currentNode;for(;z&&z[0]===_;)x.push({index:b[I],node:D,fn:z[1],forceUpdate:z[2]}),I+=1,z=g[b[I]];_+=1}if(y.hostLayout&&p.classList.remove(y.hostLayout),ae(m),y=V(m),y.template=o,y.markers=x,m.nodeType===globalThis.Node.TEXT_NODE){Tt(m),y.startNode=w.childNodes[0],y.endNode=w.childNodes[w.childNodes.length-1];let D=m,A=w.childNodes[0];for(;A;)m.parentNode.insertBefore(A,D.nextSibling),D=A,A=w.childNodes[0]}else{if(r&&i){const D=`${i}-${p===m?"c":"s"}`;p.classList.add(D),y.hostLayout=D}m.appendChild(w)}r&&Tn(m)}m.adoptedStyleSheets?zn(m,h):Tt(m,h);for(const w of y.markers){const v=E[w.index];let x;if(!(y.prevArgs&&(x=y.prevArgs[w.index],x===v&&!w.forceUpdate)))try{w.fn(p,w.node,v,x,r)}catch(_){throw console.error(`Error while updating template expression in ${Fe(p)}:
${bt(s,w.index)}`),_}}return y.prevArgs=E,m}}const We=new WeakMap;function kn(e,t,n=200){return function r(s,o){const i=r.useLayout;let a;t&&(a=setTimeout(()=>{a=void 0,fe(s,o,t,void 0,i)},n)),We.set(o,e),e.then(f=>{a&&clearTimeout(a),We.get(o)===e&&(fe(s,o,f,t&&!a?t:void 0,i),We.set(o,null))})}}function $t({target:e,detail:t},n){let r;switch(e.type){case"radio":case"checkbox":r=e.checked&&e.value;break;case"file":r=e.files;break;default:r=t&&hasOwnProperty.call(t,"value")?t.value:e.value}n(r)}function Rn(e,t){return e.split(".").reverse().reduce((n,r)=>n?{[r]:n}:{[r]:t},null)}const Et=new Map;function _n(e,t){if(!e)throw Error(`The first argument must be a property name or an object instance: ${e}`);if(typeof e=="object"){if(t===void 0)throw Error("For model instance property the second argument must be defined");const r=be.get(e);if(!r)throw Error("Provided object must be a model instance of the store");return t===null?()=>{r.set(e,null)}:(s,o)=>{$t(o,i=>{r.set(e,Rn(t,i))})}}if(arguments.length===2)return r=>{r[e]=t};let n=Et.get(e);return n||(n=(r,s)=>{$t(s,o=>{r[e]=o})},Et.set(e,n)),n}const In=Object.freeze(Object.defineProperty({__proto__:null,resolve:kn,set:_n,transition:gn},Symbol.toStringTag,{value:"Module"}));function Dn(e){return this.id=e,this}function Vn(...e){return this.styleSheets=this.styleSheets||[],this.styleSheets.push(...e),this}function Bn(e,...t){this.styleSheets=this.styleSheets||[];let n=e[0];for(let r=1;r<e.length;r++)n+=(t[r-1]!==void 0?t[r-1]:"")+e[r];return this.styleSheets.push(n),this}function Gn(e){return this.plugins=this.plugins||[],this.plugins.push(e),this}const Fn=Object.freeze(Object.defineProperty({__proto__:null,css:Bn,key:Dn,style:Vn,use:Gn},Symbol.toStringTag,{value:"Module"})),Kn=J(),Jn=J("layout"),St=new Map;function Un(e,t,n,r,s){function o(i,a){o.useLayout&&(n+=Jn);let f=St.get(n);return f||(f=Wn(e,r,s,o.useLayout),St.set(n,f)),o.plugins?o.plugins.reduce((g,u)=>u(g),()=>f(i,a,t,o.styleSheets))(i,a):f(i,a,t,o.styleSheets)}return Object.assign(o,Fn)}function G(e,...t){const n=e.join(Kn);return Un(e,t,n,!1,!1)}Object.freeze(Object.assign(G,In));const me=new Map,vt=new Map;let Xn=null;const qn=(()=>{let e;try{e=globalThis.navigator.languages||[globalThis.navigator.language]}catch{e=[]}return e.reduce((t,n)=>{const r=n.split("-")[0];return t.add(n),n!==r&&t.add(r),t},new Set)})();function Hn(){return me.size}const Ot=new Map;function Yn(e,t,n=[]){e=e.trim().replace(/\s+/g," "),t=t.trim();const r=`${e} | ${t}`;let s=vt.get(r);if(!s){if(me.size)for(const o of qn){const i=me.get(o);if(i&&(s=i[r]||i[e],s)){if(s=s.message,typeof s=="object"){let a=Ot.get(o);a||(a=new Intl.PluralRules(o),Ot.set(o,a));const f=s;s=g=>g===0&&f.zero||f[a.select(g)]||f.other||""}break}}s||s||(s=e,(me.size||Xn)&&console.warn(`Missing translation: "${e}"${t?` [${t}]`:""}`)),vt.set(r,s)}return typeof s=="function"?s(n[0]):s}const Qn="https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd",Bt={price:-1,timestamp:-1,[W.connect]:{get:async function(){try{const e=await fetch(Qn);if(!e.ok){const n=`HTTP error! status: ${e.status}`;return console.error("BTCPrice store fetch error:",n),null}return{price:(await e.json()).bitcoin.usd,timestamp:Date.now()}}catch(e){const t=e instanceof Error?e.message:"Unknown error occurred";return console.error("BTCPrice store fetch error:",t,e),null}},cache:1e4}};Mt({tag:"btc-price",price:W(Bt),render:({price:e})=>G`
        <div class="btc-price">
            <strong>BTC Price:</strong> ${W.ready(e)?`$${e.price}`:"Loading..."}
        </div>
    `});const Zn={guesses:[],addGuess(e){this.guesses=[...this.guesses,e]},getGuessesByPlayer(e){return this.guesses.filter(t=>t.playerId===e)},getAllGuesses(){return[...this.guesses]},updateGuess(e,t){this.guesses=this.guesses.map(n=>n.id===e?{...n,...t}:n)},getGuessById(e){return this.guesses.find(t=>t.id===e)}},er=W(Zn);function tr(e,t,n){return{id:`${t}-${Date.now()}`,direction:e,status:"new",outcome:null,initialPrice:n,initialTimestamp:Date.now(),playerId:t}}function Nt(e,t){if(e.disabled)return;const n=tr(t,e.playerId,e.price.price);er.addGuess(n),e.disabled=!0}Mt({tag:"guess-component",playerId:"",price:W(Bt),disabled:!1,render:({price:e,disabled:t})=>G`
        <div>
            ${W.pending(e)&&G`
                <div>Loading price...</div>
            `}
            ${W.error(e)&&G`
                <div class="error">Could not load price. Please try again later.</div>
            `}
            ${W.ready(e)&&!W.error(e)&&G`
                <button disabled="${t}" onclick="${n=>Nt(n,"up")}">Up</button>
                <button disabled="${t}" onclick="${n=>Nt(n,"down")}">Down</button>
                ${t?"":G`
                    <div>No guess made yet. Please make a guess.</div>
                `}
            `}
        </div>
    `});
